@(users: List[User.User])(implicit user: User.User)

@import helper._

@main("Blackbook | Users") {
  <link rel="stylesheet" 
    type="text/css" 
    src="@routes.Assets.at("stylesheets/users.css")"
  >
  <script type="text/javascript">
    function addUsers(json) {
      var ul = $("#userlist");
      clearUsers();

      for (var i = 0; i < json.result.length; ++i) {
        var user = json.result[i];
        
        ul.append(
          $('<li>').append(
            $("<a>").append(user.name).click(onViewUser)
        ));
      }
    }

    function clearUsers() { 
      $("#userlist").empty();
    }

    function clearContent() { 
      $("#dashboard-content").empty();
    }

    function refreshUsers() { 
      jsRoutes.controllers.api.Users.all().ajax({ 
        success: addUsers,
        error: clearUsers
      });
    }

    function onNewUser() {
      alert("onNewUser not implemented.");
    }

    function postNewUser() {
      alert("postNewUser not implemented.");
    }

    function onViewUser(name) {
      clearContent();
      alert("onViewUser not implemented.");
    }

    function onEditUser() {
      alert("onEditUser not implemented.");
    }

    
    window.onload = function() { 
      $("#new-user").click(onNewUser);

      refreshUsers();
    }
  </script>
  <div id="sidebar">
    <h2>Actions</h2>
    <a class="fancy-button" id="new-user">New User</a>
    <div id="user-header">
      <h2>Users</h2>
    </div>
    <ul class="userlist" id="userlist">
    </ul>

  </div>
  
  <div id="dashboard-content">
  </div>
}

